FROM public.ecr.aws/lambda/python:3.13

# Set the default working directory Lambda expects
WORKDIR /var/task

# Copy function code
COPY lambda_function.py .
COPY requirements.txt .

# Install dependencies into /var/task
RUN pip install --no-cache-dir -r requirements.txt -t .

# Add Lambda Runtime Interface Emulator (RIE)
ADD https://github.com/aws/aws-lambda-runtime-interface-emulator/releases/latest/download/aws-lambda-rie /usr/local/bin/aws-lambda-rie
RUN chmod +x /usr/local/bin/aws-lambda-rie

# Default Lambda entrypoint
ENTRYPOINT ["/usr/local/bin/aws-lambda-rie", "/var/lang/bin/python3.13"]
CMD ["-m", "awslambdaric", "lambda_function.lambda_handler"]